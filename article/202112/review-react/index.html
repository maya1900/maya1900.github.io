<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>重学React | 曲度小屋</title><meta name="keywords" content="react"><meta name="author" content="马阳"><meta name="copyright" content="马阳"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="重学React基础部分123456&lt;script type&#x3D;&quot;text&#x2F;babel&quot;&gt;  &#x2F;&#x2F; 1. 创建虚拟dom  const VDOM &#x3D; &lt;h1&gt;Hello&lt;&#x2F;h1&gt;  &#x2F;&#x2F; 2. 渲染  ReactDOM.render(VDOM, document.getElementById(&amp;#x27;test&amp;#x27;))&lt;&#x2F;scri"><meta property="og:type" content="article"><meta property="og:title" content="重学React"><meta property="og:url" content="http://maya1900.github.io/article/202112/review-react/index.html"><meta property="og:site_name" content="曲度小屋"><meta property="og:description" content="重学React基础部分123456&lt;script type&#x3D;&quot;text&#x2F;babel&quot;&gt;  &#x2F;&#x2F; 1. 创建虚拟dom  const VDOM &#x3D; &lt;h1&gt;Hello&lt;&#x2F;h1&gt;  &#x2F;&#x2F; 2. 渲染  ReactDOM.render(VDOM, document.getElementById(&amp;#x27;test&amp;#x27;))&lt;&#x2F;scri"><meta property="og:locale"><meta property="og:image" content="https://s4.ax1x.com/2021/12/31/T4tw1e.jpg"><meta property="article:published_time" content="2021-12-30T16:00:00.000Z"><meta property="article:modified_time" content="2022-04-02T13:54:16.015Z"><meta property="article:author" content="马阳"><meta property="article:tag" content="react"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://s4.ax1x.com/2021/12/31/T4tw1e.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://maya1900.github.io/article/202112/review-react/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"S9YGX49QD8",apiKey:"b3a5487ff9691651cd7bce2a79ac8532",indexName:"hexo",hits:{per_page:6},languages:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}.",hits_stats:"${hits} results found in ${time} ms"}},localSearch:void 0,translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"Copy successfully",error:"Copy error",noSupport:"The browser does not support"},relativeDate:{homepage:!1,post:!1},runtime:"days",date_suffix:{just:"Just",min:"minutes ago",hour:"hours ago",day:"days ago",month:"months ago"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!1,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-04-02 21:54:16"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0!==o){const a=new Date;o=864e5*o,o={value:t,expiry:a.getTime()+o};localStorage.setItem(e,JSON.stringify(o))}},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);const o=new Date;if(!(o.getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=a=>new Promise((t,e)=>{const o=document.createElement("script");o.src=a,o.async=!0,o.onerror=e,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme");"dark"===e?activateDarkMode():"light"===e&&activateLightMode();e=saveToLocal.get("aside-status");void 0!==e&&("hide"===e?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"))})(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/static-butterfly/dist/css/index.min.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="曲度小屋" type="application/atom+xml"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">57</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">14</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 留言板</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://s4.ax1x.com/2021/12/31/T4tw1e.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">曲度小屋</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 留言板</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">重学React</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-30T16:00:00.000Z" title="Created 2021-12-31 00:00:00">2021-12-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-04-02T13:54:16.015Z" title="Updated 2022-04-02 21:54:16">2022-04-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/react/">react</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">6.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>28min</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="重学React"><a href="#重学React" class="headerlink" title="重学React"></a>重学React</h1><h2 id="基础部分"><a href="#基础部分" class="headerlink" title="基础部分"></a>基础部分</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// 1. 创建虚拟dom</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> VDOM = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 2. 渲染</span></span></span><br><span class="line"><span class="javascript">  ReactDOM.render(VDOM, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>))</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="jsx基础语法"><a href="#jsx基础语法" class="headerlink" title="jsx基础语法"></a>jsx基础语法</h3><ol><li><p>定义虚拟dom不能使用”“</p></li><li><p>标签中混入js表达式使用{}</p></li><li><p>样式类名使用className</p></li><li><p>内联样式使用双大括号包裹</p><blockquote><p>js表达式与js语句：</p><p>表达式返回一个值，如a a+b fun() arr.map() function fun(){};</p><p>语句是js代码，不会返回值，如if(){} while(){} for(){} switch(){}</p></blockquote></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VDOM = (</span><br><span class="line">  &lt;h1 id=&#123;myid.toUpperCase()&#125;&gt;</span><br><span class="line">    &lt;span className=<span class="string">&quot;aa&quot;</span> style=&#123;&#123;<span class="attr">color</span>:<span class="string">&#x27;#000&#x27;</span>&#125;&#125;&gt;标题&lt;/span&gt;</span><br><span class="line">  &lt;/h1&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><blockquote><p>组件名称必须以大写字母开头</p></blockquote><h4 id="函数式组件"><a href="#函数式组件" class="headerlink" title="函数式组件"></a>函数式组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="comment">// 1. 创建函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Welcome</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>hello, &#123;props.name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2. 渲染</span></span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Welcome</span> <span class="attr">name</span>=<span class="string">&quot;aa&quot;</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="Class组件"><a href="#Class组件" class="headerlink" title="Class组件"></a>Class组件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Welcome</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Welcome,&#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="组件三大属性"><a href="#组件三大属性" class="headerlink" title="组件三大属性"></a>组件三大属性</h3><h4 id="state"><a href="#state" class="headerlink" title="state"></a>state</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Con</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>(props);</span><br><span class="line">      <span class="built_in">this</span>.state = &#123;<span class="attr">isHot</span>: <span class="literal">true</span>&#125;</span><br><span class="line">      <span class="built_in">this</span>.dem1 = <span class="built_in">this</span>.dem.bind(<span class="built_in">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">dem</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> isHot = <span class="built_in">this</span>.state.isHot</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.dem1&#125;</span>&gt;</span>天气&#123;this.state.isHot ? &#x27;火热&#x27; : &#x27;凉爽&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Con</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>注意：</p><ol><li>构造函数需要传递一个props参数</li><li>关注this，所有方法都是严格模式，直接调用this就为undefined</li><li>改变state需要用setState，修改state部分属性是合并不是覆盖</li><li>this.setState()，接收两种参数：<ol><li>setState(stateChange, [callback]) // callback可选回调，在render后调用</li><li>setState(updater, [callback]) // updater为返回state对象的函数，可以接收state和props参数</li></ol></li></ol><p><strong>React控制之外的事件调用setState是同步更新，如原生事件setTimeout/setInterval；大部分开发用到的React封装的事件，如onChange/onClick，setState是异步处理的</strong></p><p><strong>同步更新一个setState调用一次render，异步更新多个setState统一调用一次render</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Con</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// state直接赋值</span></span><br><span class="line">    state = &#123;<span class="attr">isHost</span>: <span class="literal">true</span>&#125;;</span><br><span class="line">    <span class="comment">// 使用箭头函数</span></span><br><span class="line">    dem = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> isHot = <span class="built_in">this</span>.state.isHot</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;<span class="attr">isHot</span>:!isHot&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.dem&#125;</span>&gt;</span>天气&#123;this.state.isHot ? &#x27;火热&#x27; : &#x27;凉爽&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Con</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>调用方法传递参数，有两种方法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;(e)</span> =&gt;</span> this.deleteRow(id, e)&#125;&gt;Delete Row<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.deleteRow.bind(this,</span> <span class="attr">id</span>)&#125;&gt;</span>Delete Row<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="props"><a href="#props" class="headerlink" title="props"></a>props</h4><p>props主要用来传递数据</p><p>基本使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Con</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;&#123;<span class="built_in">this</span>.props.name&#125;&lt;/li&gt;</span><br><span class="line">          &lt;li&gt;&#123;<span class="built_in">this</span>.props.age&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Con</span> <span class="attr">name</span>=<span class="string">&quot;tom&quot;</span> <span class="attr">age</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>对象使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/babel&quot;</span>&gt;</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Con</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;&#123;<span class="built_in">this</span>.props.name&#125;&lt;/li&gt;</span><br><span class="line">          &lt;li&gt;&#123;<span class="built_in">this</span>.props.age&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> p = &#123;<span class="attr">name</span>: <span class="string">&#x27;jerry&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>&#125;</span><br><span class="line">  <span class="comment">// 使用展开运算符</span></span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Con</span> &#123;<span class="attr">...p</span>&#125;/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;test&#x27;</span>))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>props限制：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Con</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;<span class="built_in">this</span>.props.name&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;<span class="built_in">this</span>.props.age&#125;&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 对属性进行限制</span></span><br><span class="line">  <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    name: PropTypes.string.isRequired,</span><br><span class="line">    age: PropTypes.number,</span><br><span class="line">    fun: PropTypes.func</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 默认值</span></span><br><span class="line">  <span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    sex: <span class="string">&#x27;male&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>函数式组件的使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作为参数传递：</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">        &lt;li&gt;&#123;props.name&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;props.age&#125;&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;&#123;props.sex&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="refs"><a href="#refs" class="headerlink" title="refs"></a>refs</h4><ol><li><p>字符串形式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=<span class="string">&quot;input&quot;</span> onBlur=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.inputBlur()&#125;/&gt;</span><br><span class="line"><span class="function"><span class="title">inputBlur</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.refs.input.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>回调形式</p><p>在ref属性中添加一个回调，将dom作为参数传递，c是该input标签，把元素赋值实例对象一个属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;<span class="function"><span class="params">c</span> =&gt;</span> <span class="built_in">this</span>.input = c&#125; onBlur=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.inputBlur()&#125;/&gt;</span><br><span class="line"><span class="function"><span class="title">inputBlur</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.input.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>api形式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MyRef = React.createRef()</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> ref=&#123;<span class="built_in">this</span>.MyRef&#125; onBlur=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.inputBlur()&#125;/&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">inputBlur</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.MyRef.current.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>尽可能使用操作元素事件替代，少用ref</strong></p><h3 id="react事件"><a href="#react事件" class="headerlink" title="react事件"></a>react事件</h3><p>react事件通过onXXX属性指定属性处理函数，通过事件委托方式处理，事件中返回函数，通过event.target得到发生事件的dom元素对象</p><h3 id="受控与非受控组件"><a href="#受控与非受控组件" class="headerlink" title="受控与非受控组件"></a>受控与非受控组件</h3><p>受控组件state是”唯一数据源”；</p><p>非受控组件数据不会更新state，数据用作展示，输入数据现用现取</p><h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><ol><li>函数的参数是函数</li><li>函数的返回值是一个函数</li></ol><h3 id="函数的柯里化"><a href="#函数的柯里化" class="headerlink" title="函数的柯里化"></a>函数的柯里化</h3><p>通过函数调用继续返回函数的形式，实现多次接收参数最后统一处理的函数编码形式</p><h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><h4 id="旧"><a href="#旧" class="headerlink" title="旧"></a>旧</h4><ol><li><p>初始化阶段，由ReactDom.render()触发</p><p>i. constructor()</p><p>ii. componentWillMount()</p><p>iii. render()</p><p>iv. componentDidMount()</p></li><li><p>更新阶段，由this.setState()触发</p><p>i. shouldComponentUpdate() // 返回true/false判断是否更新</p><p>ii. componentWillUpdate()</p><p>iii. render()</p><p>(iv. componentWillReceiveProps) // 父组件更新，子组件先执行(第一次传递数据不执行)</p><p>iv. componentDidUpdate()</p></li><li><p>卸载组件，由ReactDOM.unmountComponentAtNode()触发</p><p>i. componentWillUnmount()</p></li></ol><h4 id="新"><a href="#新" class="headerlink" title="新"></a>新</h4><p>抛弃componentWillMount/componentWillReceiveProps/componentWillUpdate</p><ol><li><p>初始化阶段，由ReactDOM.render()触发</p><p>i. constructor()</p><p>ii. getDerivedStateFromProps // 必须static 传参(props,state)，返回Null或state对象</p><p>iii. render()</p><p>iv. componentDidMount()</p></li><li><p>更新阶段，由this.setState()或父组件重新render触发</p><p>i. getDerivedStateFromProps</p><p>ii. shouldComponentUpdate()</p><p>iii. render()</p><p>iv. getSnapshotBeforeUpdate // 传参(prevProps, prevState) ，任何返回值传给v阶段</p><p>v. componentDidUpdate() // 传参(prevProps, prevState, snapshot)</p></li><li><p>卸载组件， 由ReactDOM.unmountComponentAtNode()触发</p><p>i. componentWillUnmount()</p></li></ol><h3 id="react-跨域"><a href="#react-跨域" class="headerlink" title="react 跨域"></a>react 跨域</h3><ul><li><p>方法一</p><p>在package.json中配置：<code>&quot;proxy&quot;: &quot;http://localhost:5000&quot;</code></p></li><li><p>方法二</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;proxy&quot;: &#123;</span><br><span class="line">    &quot;/api&quot;: &#123;</span><br><span class="line">        &quot;target&quot;: &quot;http://localhost:8000&quot;,</span><br><span class="line">        &quot;changeOrigin&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;/app&quot;: &#123;</span><br><span class="line">        &quot;target&quot;: &quot;http://localhost:8001&quot;,</span><br><span class="line">        &quot;changeOrigin&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>方法三</p><p>创建src/setupProxy.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">    app.use(</span><br><span class="line">    	proxy(<span class="string">&#x27;/api&#x27;</span>,&#123;</span><br><span class="line">            target: <span class="string">&#x27;http://localhost:3000&#x27;</span>,</span><br><span class="line">            changeOrigin: <span class="literal">true</span>,</span><br><span class="line">            pathRewrite: &#123;</span><br><span class="line">                <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><h3 id="基本使用："><a href="#基本使用：" class="headerlink" title="基本使用："></a>基本使用：</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/hello&quot;</span>&gt;</span>Hello<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">v5:</span><br><span class="line"><span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Hello&#125;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">component</span>=<span class="string">&#123;About&#125;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span><br><span class="line">v6:</span><br><span class="line"><span class="tag">&lt;<span class="name">Routes</span>&gt;</span></span><br><span class="line">    &lt;Route path=&quot;/hello&quot; element=&#123;&lt;Hello/&gt;&#125; /&gt;</span><br><span class="line">    &lt;Route path=&quot;/about&quot; element=&#123;&lt;About/&gt;&#125; /&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">Routes</span>&gt;</span></span><br><span class="line">App外包裹：</span><br><span class="line"><span class="tag">&lt;<span class="name">BrowserRouter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">BrowserRouter</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="路由组件与一般组件："><a href="#路由组件与一般组件：" class="headerlink" title="路由组件与一般组件："></a>路由组件与一般组件：</h3><ol><li>写法不一样：</li><li>存放位置不一样：一般组件components，路由组件pages</li><li>路由组件接收到固定三个属性history,location,match</li></ol><h3 id="NavLink封装："><a href="#NavLink封装：" class="headerlink" title="NavLink封装："></a>NavLink封装：</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> // 通过&#123;...对象&#125;的形式解析对象，相当于将对象中的属性全部展开</span><br><span class="line"> //<span class="tag">&lt;<span class="name">NavLink</span>  <span class="attr">to</span> = <span class="string">&#123;this.props.to&#125;</span> <span class="attr">children</span> = <span class="string">&#123;this.props.children&#125;/</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">className</span>=<span class="string">&quot;list-group-item&quot;</span> &#123;<span class="attr">...this.props</span>&#125;/&gt;</span></span><br><span class="line">使用：</span><br><span class="line">&#123;/*将NavLink进行封装，成为MyNavLink,通过props进行传参数，标签体内容props是特殊的一个属性，叫做children */&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">MyNavLink</span> <span class="attr">to</span> = <span class="string">&quot;/about&quot;</span> &gt;</span>About<span class="tag">&lt;/<span class="name">MyNavLink</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="嵌套路由："><a href="#嵌套路由：" class="headerlink" title="嵌套路由："></a>嵌套路由：</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">v6:</span><br><span class="line">父：</span><br><span class="line">&lt;Route path=&quot;/about/*&quot; element=&#123;&lt;About/&gt;&#125; /&gt;</span><br><span class="line">子：</span><br><span class="line"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&quot;message&quot;</span>&gt;</span>message<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span><br><span class="line">&lt;Route path=&quot;message&quot; element=&#123;&lt;Message/&gt;&#125;/&gt;</span><br><span class="line">页面：http://localhost:3000/about/message</span><br><span class="line">v5:</span><br><span class="line">父：</span><br><span class="line"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/about&quot;</span> <span class="attr">element</span>=<span class="string">&#123;About&#125;</span> /&gt;</span></span><br><span class="line">子：</span><br><span class="line">let &#123;path, url&#125; = useRouteMatch()</span><br><span class="line"><span class="tag">&lt;<span class="name">NavLink</span> <span class="attr">to</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">url</span>&#125;/<span class="attr">message</span>`&#125;&gt;</span>message<span class="tag">&lt;/<span class="name">NavLink</span>&gt;</span></span><br><span class="line">&lt;Route path=&#123;`$&#123;path&#125;/message`&#125; component=&#123;&lt;Message/&gt;&#125;/&gt;</span><br></pre></td></tr></table></figure><p>其他参考：<a href="%5B(19%E6%9D%A1%E6%B6%88%E6%81%AF">react-router v6迁移指南</a> React-Router v6 新特性解读及迁移指南_前端劝退师-CSDN博客_react router v6](<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40906515/article/details/104957712">https://blog.csdn.net/weixin_40906515/article/details/104957712</a>))</p><h3 id="向路由组件传递参数"><a href="#向路由组件传递参数" class="headerlink" title="向路由组件传递参数"></a>向路由组件传递参数</h3><ul><li><p>params</p><ol><li>路由链接：<code>&lt;Link to=&#39;/demo/test/tom/18&#39;&#125;&gt;详情&lt;/Link&gt;</code></li><li>注册路由：<code>&lt;Route path=&quot;/demo/test/:name/:age&quot; component=&#123;Test&#125;/&gt;</code></li><li>接收参数：this.props.match.params</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------发送参数:父组件----------------------------------------------</span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      &#123;/* 向路由组件传递params参数 */&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`/<span class="attr">home</span>/<span class="attr">message</span>/<span class="attr">detail</span>/$&#123;<span class="attr">msgObj.id</span>&#125;/$&#123;<span class="attr">msgObj.title</span>&#125;`&#125;&gt;</span>&#123;msgObj.title&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">      &#123;/* 声明接收params参数 */&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/home/message/detail/:id/:title&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Detail&#125;</span> /&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> --------------------------------接受参数:子组件-----------------------------------------------------------</span><br><span class="line">   const &#123;id,title&#125; = this.props.match.params</span><br></pre></td></tr></table></figure></li><li><p>search</p><ol><li>路由链接：<code>&lt;Link to=&#39;/demo/test?name=tom&amp;age=18&#39;&#125;&gt;详情&lt;/Link&gt;</code></li><li>注册路由(无需声明)：<code>&lt;Route path=&quot;/demo/test&quot; component=&#123;Test&#125;/&gt;</code></li><li>接收参数：this.props.location.search</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------发送参数:父组件----------------------------------------------</span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">     	&#123;/* 向路由组件传递search参数 */&#125;</span><br><span class="line"> 	<span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`/<span class="attr">home</span>/<span class="attr">message</span>/<span class="attr">detail</span>/?<span class="attr">id</span>=<span class="string">$&#123;msgObj.id&#125;&amp;title</span>=<span class="string">$&#123;msgObj.title&#125;</span>`&#125;&gt;</span>&#123;msgObj.title&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    	&#123;/* search参数无需声明接收，正常注册路由即可 */&#125;</span><br><span class="line"> 	<span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/home/message/detail&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Detail&#125;/</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> --------------------------------接受参数:子组件-----------------------------------------------------------</span><br><span class="line"> import qs from &#x27;querystring&#x27;</span><br><span class="line"> // 接收search参数</span><br><span class="line"> const &#123;search&#125; = this.props.location</span><br><span class="line"> const &#123;id,title&#125; = qs.parse(search.slice(1))</span><br></pre></td></tr></table></figure></li><li><p>state</p><ol><li>路由链接：<code>&lt;Link to=&#123;&#123;pathname:'/demo/test',state:&#123;name:'tom',age:18&#125;&#125;&#125;&gt;详情&lt;/Link&gt;</code></li><li>注册路由(无需声明)：<code>&lt;Route path=&quot;/demo/test&quot; component=&#123;Test&#125;/&gt;</code></li><li>接收参数：this.props.location.state<ul><li>使用<code>BrowserRouter</code>刷新才可以<code>保留住参数</code>,使用<code>HashRouter</code>刷新后state将会没有<code>history</code>来保存参数</li></ul></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-------------------------------发送参数:父组件----------------------------------------------</span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">     	&#123;/* 向路由组件传递state参数 */&#125;</span><br><span class="line"> 	<span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;&#123;pathname:</span>&#x27;/<span class="attr">home</span>/<span class="attr">message</span>/<span class="attr">detail</span>&#x27;,<span class="attr">state:</span>&#123;<span class="attr">id:msgObj.id</span>,<span class="attr">title:msgObj.title</span>&#125;&#125;&#125;&gt;</span>&#123;msgObj.title&#125;<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span><br><span class="line">    	&#123;/* state参数无需声明接收，正常注册路由即可 */&#125;</span><br><span class="line"> 	<span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/home/message/detail&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Detail&#125;/</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> --------------------------------接受参数:子组件-----------------------------------------------------------</span><br><span class="line">   // 接收state参数,后面添加`||&#123;&#125;`是防止使用`HashRouter`后state为undefined时报错</span><br><span class="line"> const &#123;id,title&#125; = this.props.location.state || &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><p>v5借助this.props.history对象的api对路由跳转进行操作</p><ol><li>this.props.history.push()</li><li>this.props.history.replace()</li><li>this.props.history.goBack()</li><li>this.props.history.goForward()</li><li>this.props.history.go()</li></ol><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> pushShow = <span class="function">(<span class="params">id, title</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="comment">//push跳转+携带params参数</span></span><br><span class="line">   <span class="built_in">this</span>.props.history.push(<span class="string">`/home/message/detail/<span class="subst">$&#123;id&#125;</span>/<span class="subst">$&#123;title&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">   <span class="comment">//push跳转+携带search参数</span></span><br><span class="line">   <span class="built_in">this</span>.props.history.push(<span class="string">`/home/message/detail?id=<span class="subst">$&#123;id&#125;</span>&amp;title=<span class="subst">$&#123;title&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">   <span class="comment">//push跳转+携带state参数</span></span><br><span class="line">   <span class="built_in">this</span>.props.history.push(<span class="string">`/home/message/detail`</span>, &#123; id, title &#125;)</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> <span class="built_in">this</span>.pushShow(msgObj.id, msgObj.title)&#125;&gt;push查看&lt;/button&gt;</span><br><span class="line">&#123;<span class="comment">/* 声明接收params参数 */</span>&#125;</span><br><span class="line">&#123;<span class="comment">/* &lt;Route path=&quot;/home/message/detail/:id/:title&quot; component=&#123;Detail&#125;/&gt; */</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* search参数无需声明接收，正常注册路由即可 */</span>&#125;</span><br><span class="line">&#123;<span class="comment">/* &lt;Route path=&quot;/home/message/detail&quot; component=&#123;Detail&#125;/&gt; */</span>&#125;</span><br><span class="line"></span><br><span class="line">&#123;<span class="comment">/* state参数无需声明接收，正常注册路由即可 */</span>&#125;</span><br><span class="line">&lt;Route path=<span class="string">&quot;/home/message/detail&quot;</span> component=&#123;Detail&#125; /&gt;</span><br></pre></td></tr></table></figure><p>v6使用useNavigate进行编程式导航</p><h3 id="withRouter"><a href="#withRouter" class="headerlink" title="withRouter"></a>withRouter</h3><p>withRouter可以让一般组件须具备路由组件的属性<code>export default withRouter(Header)</code></p><h2 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h2><p>中文文档：<a target="_blank" rel="noopener" href="https://www.redux.org.cn/">Redux中文文档</a></p><h3 id="redux是什么"><a href="#redux是什么" class="headerlink" title="redux是什么"></a>redux是什么</h3><ol><li>redux是一个专门用于做<code>状态管理的JS库</code>(不是react插件库)。</li><li>它可以用在react, angular, vue等项目中, 但基本与react配合使用。</li><li>作用: 集中式管理react应用中多个组件<code>共享</code>的状态。</li></ol><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/TJfZRK"><img src="https://s4.ax1x.com/2021/12/24/TJfZRK.png" alt="TJfZRK.png"></a></p><h3 id="redux三个概念"><a href="#redux三个概念" class="headerlink" title="redux三个概念"></a>redux三个概念</h3><h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><p>动作的对象。</p><p>type: 标识属性，唯一，值为字符串</p><p>data: 数据属性，值任意</p><p>例子：<code>&#123; type: &#39;ADD_STUDENT&#39;,data:&#123;name: &#39;tom&#39;,age:18&#125; &#125;</code></p><h4 id="reducer"><a href="#reducer" class="headerlink" title="reducer"></a>reducer</h4><ol><li><p>用于初始化状态、加工状态。</p></li><li><p>加工时根据旧的state和action,产生新的state的纯函数</p></li><li><p>redux的reducer函数必须是一个纯函数</p><blockquote><p>纯函数：相同输入必定得到同样输出。</p><ol><li>不得改写参数数据</li><li>不会产生任何副作用，如网络请求、输入输出设备</li><li>不能调用Date.now()或Math.random()等不纯的方法</li></ol></blockquote></li></ol><h4 id="store"><a href="#store" class="headerlink" title="store"></a>store</h4><ol><li><p>将state、action、reducer联系在一起的对象</p></li><li><p>如何获得？</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducers&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(reducer)</span><br></pre></td></tr></table></figure></li><li><p>对象的功能？</p><ul><li>getState()：得到state</li><li>dispatch(action)：分发action，触发reducer调用，产生新的state</li><li>subscribe(listencer)：注册监听，产生新的state时，自动调用</li></ul></li></ol><h3 id="redux的核心api"><a href="#redux的核心api" class="headerlink" title="redux的核心api"></a>redux的核心api</h3><ul><li>createstate()与applyMiddleware()</li></ul><p>createstore()：创建包含指定reducer的store对象</p><p>applyMiddleware()：应用基于redux的中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(reducer, composeWithDevTools(applyMiddleware(thunk)))</span><br></pre></td></tr></table></figure><ul><li>store对象</li></ul><p>redux最核心的管理对象。</p><p>维护state,reducer</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ---------------------------store.js---------------------------------</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 该文件撰文用于暴露一个store对象,整个应用只有一个store对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//引入createStore,专门用于创建redux中最为核心的store对象</span></span><br><span class="line"><span class="keyword">import</span> &#123;createStore,applyMiddleware&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="comment">//引入汇总后的reducer</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducers&#x27;</span></span><br><span class="line"><span class="comment">//引入redux-thunk，用于支持异步action</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"><span class="comment">//引入redux-devtools-extension</span></span><br><span class="line"><span class="keyword">import</span> &#123;composeWithDevTools&#125; <span class="keyword">from</span> <span class="string">&#x27;redux-devtools-extension&#x27;</span></span><br><span class="line"><span class="comment">//暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(reducer,composeWithDevTools(applyMiddleware(thunk)))</span><br><span class="line"><span class="comment">// ----------------------------index.js 引入store对象--------------------------------</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./redux/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;Provider&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="comment">/* 此处需要用Provider包裹App，目的是让App所有的后代容器组件都能接收到store */</span></span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">  	&lt;App/&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>combinReducers()</li></ul><p>作用：合并多个reducer函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ------------------ redux/reducers/index.js ------------------------------------</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 该文件用于汇总所有的reducer为一个总的reducer</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//引入combineReducers，用于汇总多个reducer</span></span><br><span class="line"><span class="keyword">import</span> &#123;combineReducers&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="comment">//引入为Count组件服务的reducer</span></span><br><span class="line"><span class="keyword">import</span> count <span class="keyword">from</span> <span class="string">&#x27;./count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> persons <span class="keyword">from</span> <span class="string">&#x27;./person&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//汇总所有的reducer变为一个总的reducer</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> combineReducers(&#123;</span><br><span class="line">  count,persons</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="redux异步编程"><a href="#redux异步编程" class="headerlink" title="redux异步编程"></a>redux异步编程</h3><p>使用异步中间件：</p><p>下载依赖npm i redux-thunk</p><h3 id="react-redux"><a href="#react-redux" class="headerlink" title="react-redux"></a>react-redux</h3><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/TdRunK"><img src="https://s4.ax1x.com/2021/12/26/TdRunK.png" alt="TdRunK.png"></a></p><p>react插件库，用来简化react应用中使用redux</p><p>react-redux将组件分成两大类：ui组件与容器组件</p><ul><li>ui组件<ul><li>只负责ui呈现，不带有任何业务逻辑</li><li>通过props接收数据</li><li>不使用任何redux的api</li><li>一般保存在components文件夹下，也可以直接在容器组件中直接加工成容器组件</li></ul></li><li>容器组件<ul><li>负责管理数据和业务逻辑</li><li>使用redux的api</li><li>一般保存在containers文件夹下</li></ul></li></ul><p>相关api</p><ul><li><p>provider</p><p>作用：记所有组件都可以得到state数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./redux/store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;Provider&#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="comment">/* 此处需要用Provider包裹App，目的是让App所有的后代容器组件都能接收到store */</span></span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">  	&lt;App/&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p>connect()()</p><p>作用：用于包装ui组件生成容器组件</p><p>connect(mapStateToProps,mapDispatchToprops)(ui组件)</p><p>注意：</p><ul><li>默认传入state与dispatch</li><li>省略dispatch直接传入action，自动调用dispatch</li></ul><p><strong>mapStateToProps</strong></p><p>将外部数据state对象转换为ui组件的标签属性，返回一个对象</p><p>返回对象的key就是传递给ui组件的props的key，value就作为传递ui组件props的value</p><p>用于传递状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">count</span>: state &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>mapDispatchToProps</strong></p><p>将分发的action的函数转换为ui组件的标签属性，返回一个对象</p><p>用于传递操作状态的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">         jia:<span class="function"><span class="params">number</span> =&gt;</span> dispatch(createIncrementAction(number)),</span><br><span class="line">  		jian:<span class="function"><span class="params">number</span> =&gt;</span> dispatch(createDecrementAction(number)),</span><br><span class="line">  		jiaAsync:<span class="function">(<span class="params">number,time</span>) =&gt;</span> dispatch(createIncrementAsyncAction(number,time)),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps,mapDispatchToProps)(CountUI)</span><br><span class="line"><span class="comment">// ------- 简化代码 -----</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">	state =&gt; (&#123; <span class="attr">count</span>: state.count, <span class="attr">personCount</span>: state.person.length &#125;),</span><br><span class="line">    &#123; increment, decrement, incrementAsync &#125;</span><br><span class="line">)(Count)</span><br></pre></td></tr></table></figure></li></ul><h3 id="求和案例"><a href="#求和案例" class="headerlink" title="求和案例"></a>求和案例</h3><h4 id="redux-mini版"><a href="#redux-mini版" class="headerlink" title="redux mini版"></a>redux mini版</h4><ol><li><p>去除自身状态</p></li><li><p>src下建立：</p><p>-redux</p><p>-store.js</p><p>-count_reducer.js</p></li><li><p>store.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./count_reducer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(countReducer)</span><br></pre></td></tr></table></figure></li><li><p>count_reducer.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initState = <span class="number">0</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">countReducer</span>(<span class="params">preState=initState, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = action;</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> preState + data</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> preState - data</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> preState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>count/index.jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../../redux/store&#x27;</span>  </span><br><span class="line">increment = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber</span><br><span class="line">    store.dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;increment&#x27;</span>, <span class="attr">data</span>: value*<span class="number">1</span>&#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  incrementIfOdd = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber;</span><br><span class="line">    <span class="keyword">const</span> count = store.getState();</span><br><span class="line">    <span class="keyword">if</span> (count % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">      store.dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;increment&#x27;</span>, <span class="attr">data</span>: value * <span class="number">1</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  &lt;h1&gt;当前求和为： &#123;store.getState()&#125;&lt;/h1&gt;</span><br></pre></td></tr></table></figure></li><li><p>index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./redux/store&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听</span></span><br><span class="line">store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h4 id="redux-完整版"><a href="#redux-完整版" class="headerlink" title="redux 完整版"></a>redux 完整版</h4><p>新增文件：</p><ol><li><p>count_action.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; INCREMENT, DECREMENT &#125; <span class="keyword">from</span> <span class="string">&#x27;./constant&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createIncrementAction = <span class="function"><span class="params">data</span> =&gt;</span> (&#123; <span class="attr">type</span>: INCREMENT, data &#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createDecrementAction = <span class="function"><span class="params">data</span> =&gt;</span> (&#123; <span class="attr">type</span>: DECREMENT, data &#125;)</span><br></pre></td></tr></table></figure></li><li><p>constant.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> INCREMENT = <span class="string">&#x27;increment&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DECREMENT = <span class="string">&#x27;decrement&#x27;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="redux-异步action"><a href="#redux-异步action" class="headerlink" title="redux 异步action"></a>redux 异步action</h4><p>延迟动作不想给组件自身，交给action管理</p><p>action返回一般对象为同步action,返回函数是异步action</p><p>使用redux-thunk,配置在store中</p><ol><li><p>修改count_action.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 异步action指action值为函数,异步action中一般会传入同步action,参数值为dispatch, 不是必须用的，在action中写异步时用，在组件中写异步方法不用</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createIncrementAsyncAction = <span class="function">(<span class="params">data, time</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">dispatch</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      dispatch(createIncrementAction(data))</span><br><span class="line">    &#125;, time);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改store.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./count_reducer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(countReducer, applyMiddleware(thunk))</span><br></pre></td></tr></table></figure></li><li><p>修改count/index.jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">incrementAsync = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber;</span><br><span class="line">  store.dispatch(createIncrementAsyncAction(value * <span class="number">1</span>, <span class="number">500</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="react-redux基础版"><a href="#react-redux基础版" class="headerlink" title="react-redux基础版"></a>react-redux基础版</h4><ol><li>ui组件内不能使用任何redux的api，只负责页面呈现</li><li>容器组件：只负责和redux通信，将结果交给ui组件</li><li>创建容器组件：react-redux的connect()(ui)方法</li><li>容器组件中store是靠props传进去的</li></ol><p>App.jsx</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入容器组件</span></span><br><span class="line"><span class="keyword">import</span> Count <span class="keyword">from</span> <span class="string">&#x27;./containers/Count&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Count store=&#123;store&#125;/&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>添加容器组件containers/Count/index.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CountUI <span class="keyword">from</span> <span class="string">&#x27;../../components/Count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createIncrementAction,createDecrementAction, createIncrementAsyncAction &#125; <span class="keyword">from</span> <span class="string">&#x27;../../redux/count_action&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapStateToProps</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">count</span>: state &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapDispatchToProps</span>(<span class="params">dispatch</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    increment: <span class="function">(<span class="params">value</span>) =&gt;</span> dispatch(createIncrementAction(value)),</span><br><span class="line">    decrement: <span class="function">(<span class="params">value</span>) =&gt;</span> dispatch(createDecrementAction(value)),</span><br><span class="line">    incrementAsync: <span class="function">(<span class="params">value, time</span>) =&gt;</span> dispatch(createIncrementAsyncAction(value,time)),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(mapStateToProps, mapDispatchToProps)(CountUI)</span><br></pre></td></tr></table></figure><p>修改ui组件components/Count/index.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">increment = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber</span><br><span class="line">  <span class="built_in">this</span>.props.increment(value*<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line">decrement = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber;</span><br><span class="line">  <span class="built_in">this</span>.props.decrement(value * <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">incrementIfOdd = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.props.count % <span class="number">2</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.props.increment(value*<span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">incrementAsync = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; value &#125; = <span class="built_in">this</span>.selectNumber;</span><br><span class="line">  <span class="built_in">this</span>.props.incrementAsync(value*<span class="number">1</span>,<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;h1&gt;当前求和为： &#123;<span class="built_in">this</span>.props.count&#125;&lt;/h1&gt;</span><br></pre></td></tr></table></figure><h4 id="react-redux优化"><a href="#react-redux优化" class="headerlink" title="react-redux优化"></a>react-redux优化</h4><p>优化点：</p><ul><li>容器组件和ui组件合并为一个文件</li><li>无需自己给容器组件传递store，给<code>&lt;App/&gt;</code>包裹一个<code>&lt;Provider store=&#123;store&#125;&gt;</code>即可</li><li>使用react-redux后不用自己监听redux中状态的改变</li><li>mapDispatchToProps可以简单的写成一个对象</li><li>一个组件使用redux经过哪几步？<ul><li>定义好ui组件</li><li>引入connect生成一个容器组件并暴露</li><li>在ui组件中通过this.props.xxx读取和操作状态</li></ul></li></ul><p>container/Count/index.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">  (state) =&gt; (&#123; <span class="attr">count</span>: state &#125;),</span><br><span class="line">  <span class="comment">// mapDispatchToProps一般写法</span></span><br><span class="line">  <span class="comment">// (dispatch) =&gt; (&#123;</span></span><br><span class="line">  <span class="comment">//   increment: (value) =&gt; dispatch(createIncrementAction(value)),</span></span><br><span class="line">  <span class="comment">//   decrement: (value) =&gt; dispatch(createDecrementAction(value)),</span></span><br><span class="line">  <span class="comment">//   incrementAsync: (value, time) =&gt;</span></span><br><span class="line">  <span class="comment">//     dispatch(createIncrementAsyncAction(value, time)),</span></span><br><span class="line">  <span class="comment">// &#125;)</span></span><br><span class="line">  <span class="comment">// mapDispatchToProps简写，写成对象，传入action自动调用dispatch</span></span><br><span class="line">  &#123;</span><br><span class="line">    increment: createIncrementAction,</span><br><span class="line">    decrement: createDecrementAction,</span><br><span class="line">    incrementAsync: createIncrementAsyncAction</span><br><span class="line">  &#125;</span><br><span class="line">)(CountUI);</span><br></pre></td></tr></table></figure><p>src/index.js</p><p>使用react-redux无需再去监听redux状态改变</p><p>提供Provider给所有需要store的组件传入store</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;, </span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听redux中状态的改变</span></span><br><span class="line"><span class="comment">// store.subscribe(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   ReactDOM.render(&lt;App /&gt;, document.getElementById(&#x27;root&#x27;))</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure><h4 id="react-redux数据共享版"><a href="#react-redux数据共享版" class="headerlink" title="react-redux数据共享版"></a>react-redux数据共享版</h4><ul><li>定义Person组件，与Count组件通过redux共享数据</li><li>为Person组件编写reducer,action，配置constant常量</li><li>使用combineReducer进行reducer合并</li><li>交给store的是总reducer，取出状态时取到位</li></ul><p>containers/Person/index.js</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;nanoid&#125; <span class="keyword">from</span> <span class="string">&#x27;nanoid&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createAddPersonAction &#125; <span class="keyword">from</span> <span class="string">&#x27;../../redux/actions/person&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  addPerson = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="built_in">this</span>.nameNode.value</span><br><span class="line">    <span class="keyword">const</span> age = <span class="built_in">this</span>.ageNode.value</span><br><span class="line">    <span class="keyword">const</span> personobj = &#123;<span class="attr">id</span>:nanoid(),name,age&#125;</span><br><span class="line">    <span class="built_in">this</span>.props.addPerson(personobj)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> personArr = <span class="built_in">this</span>.props.person</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;我是person组件&lt;/h2&gt;</span><br><span class="line">        &lt;h4&gt;Count组件里的求和为：&#123;<span class="built_in">this</span>.props.count&#125;&lt;/h4&gt;</span><br><span class="line">        &lt;input ref=&#123;<span class="function"><span class="params">c</span> =&gt;</span> <span class="built_in">this</span>.nameNode = c&#125;type=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">        &lt;input ref=&#123;<span class="function"><span class="params">c</span> =&gt;</span> <span class="built_in">this</span>.ageNode = c&#125;type=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.addPerson&#125;&gt;增加&lt;/button&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &#123;</span><br><span class="line">            personArr.map(<span class="function">(<span class="params">person</span>) =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;person.id&#125;</span>&gt;</span>&#123;person.name&#125;--&#123;person.age&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(</span><br><span class="line">  <span class="comment">// 可以拿到Count组件里的值</span></span><br><span class="line">  state =&gt; (&#123;<span class="attr">person</span>: state.person,<span class="attr">count</span>:state.count&#125;),</span><br><span class="line">  &#123; <span class="attr">addPerson</span>: createAddPersonAction &#125;</span><br><span class="line">)(Person)</span><br></pre></td></tr></table></figure><p>actions/person.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ADD_PERSON &#125; <span class="keyword">from</span> <span class="string">&#x27;../constant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createAddPersonAction = <span class="function"><span class="params">personObj</span> =&gt;</span> (&#123;</span><br><span class="line">  type: ADD_PERSON, <span class="attr">data</span>: personObj</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>reducer/person.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ADD_PERSON &#125; <span class="keyword">from</span> <span class="string">&quot;../constant&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initState = [&#123;<span class="attr">name</span>: <span class="string">&#x27;tom&#x27;</span>,<span class="attr">age</span>: <span class="number">18</span>, <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>&#125;]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">personReducer</span>(<span class="params">preState=initState, action</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; type, data &#125; = action</span><br><span class="line">  <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">    <span class="keyword">case</span> ADD_PERSON:</span><br><span class="line">      <span class="keyword">return</span> [data, ...preState]</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="keyword">return</span> preState</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>redux/store.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, combineReducers &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./reducers/count&#x27;</span></span><br><span class="line"><span class="keyword">import</span> personReducer <span class="keyword">from</span> <span class="string">&#x27;./reducers/person&#x27;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 合并后是一个对象，取用时使用state.xxx</span></span><br><span class="line"><span class="keyword">const</span> allReducers = combineReducers(&#123;</span><br><span class="line">  count: countReducer,</span><br><span class="line">  person: personReducer</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(allReducers, applyMiddleware(thunk))</span><br></pre></td></tr></table></figure><h4 id="redact-redux开发者工具"><a href="#redact-redux开发者工具" class="headerlink" title="redact-redux开发者工具"></a>redact-redux开发者工具</h4><p>redux/store.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; composeWithDevTools &#125; <span class="keyword">from</span> <span class="string">&#x27;redux-devtools-extension&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(allReducers, composeWithDevTools(applyMiddleware(thunk))</span><br></pre></td></tr></table></figure><h2 id="打包"><a href="#打包" class="headerlink" title="打包"></a>打包</h2><p><code>npm run build</code>打包项目</p><p>全局安装<code>npm i serve</code>，serve 项目目录测试运行。</p><p>或者搭建后台环境执行。</p><p>例nodejs环境：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*const options = &#123;</span></span><br><span class="line"><span class="comment">    target: &quot;http://localhost:8080&quot;,</span></span><br><span class="line"><span class="comment">    changeOrigin:true,</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">const apiProxy = proxy(options)*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line">app.use(express.static(__dirname))</span><br><span class="line"><span class="comment">//app.use(&#x27;/&#x27;, apiProxy)</span></span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><h2 id="react-拓展"><a href="#react-拓展" class="headerlink" title="react 拓展"></a>react 拓展</h2><h4 id="setState的2种写法"><a href="#setState的2种写法" class="headerlink" title="setState的2种写法"></a>setState的2种写法</h4><ul><li><p>setState(stateChange, [callback])</p><p>stateChange是一个对象，callback是render后的回调</p></li><li><p>setState(updater, [callback])</p><p>updater是一个函数，接收state和props两个参数，返回对象</p></li></ul><h4 id="lazyLoad"><a href="#lazyLoad" class="headerlink" title="lazyLoad"></a>lazyLoad</h4><p>路由组件lazyLoad</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component,lazy,Suspense&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="comment">// import Home from &#x27;./Home&#x27;</span></span><br><span class="line"><span class="keyword">const</span> Home = lazy(<span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./Home&#x27;</span>) )</span><br></pre></td></tr></table></figure><h4 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h4><ul><li><p>useState()</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">State Hook让函数组件也可以有state状态, 并进行状态数据的读写操作</span><br><span class="line">语法: const [xxx, setXxx] &#x3D; React.useState(initValue) </span><br><span class="line">useState()说明:</span><br><span class="line">    参数: 第一次初始化指定的值在内部作缓存</span><br><span class="line">    返回值: 包含2个元素的数组, 第1个为内部当前状态值, 第2个为更新状态值的函数</span><br><span class="line">setXxx()2种写法:</span><br><span class="line">    setXxx(newValue): 参数为非函数值, 直接指定新的状态值, 内部用其覆盖原来的状态值</span><br><span class="line">    setXxx(value &#x3D;&gt; newValue): 参数为函数, 接收原本的状态值, 返回新的状态值, 内部用其覆盖原来的状态值</span><br></pre></td></tr></table></figure></li><li><p>useEffect</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Effect Hook 可以让你在函数组件中执行副作用操作(用于模拟类组件中的生命周期钩子)</span><br><span class="line">React中的副作用操作:发ajax请求数据获取、设置订阅 &#x2F; 启动定时器、手动更改真实DOM</span><br><span class="line">语法：</span><br><span class="line">userEffect(() &#x3D;&gt; &#123;</span><br><span class="line">	&#x2F;&#x2F; 执行副操作</span><br><span class="line">	return () &#x3D;&gt; &#123; &#x2F;&#x2F; 写了这里在组件卸载前执行</span><br><span class="line">	&#125;</span><br><span class="line">&#125;,[statevalue]) &#x2F;&#x2F; statevalue值变化引起执行，为空只初始化执行</span><br><span class="line">可以把 useEffect Hook 看做如下三个函数的组合：componentDidMount()、componentDidUpdate()、componentWillUnmount()</span><br></pre></td></tr></table></figure></li><li><p>useRef</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Ref Hook可以在函数组件中存储&#x2F;查找组件内的标签或任意其它数据</span><br><span class="line">语法: const refContainer &#x3D; useRef()</span><br><span class="line">作用:保存标签对象,功能与React.createRef()一样</span><br></pre></td></tr></table></figure></li></ul><h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Fragment&gt;&lt;Fragment&gt;</span><br><span class="line">&lt;&gt;&lt;&#x2F;&gt;</span><br></pre></td></tr></table></figure><h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><blockquote><p>一种组件间通信方式, 常用于【父组件】与【后代组件】间通信</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件</span></span><br><span class="line"><span class="keyword">const</span> XxxContext = React.createContext()  </span><br><span class="line">&lt;xxxContext.Provider value=&#123;数据&#125;&gt;</span><br><span class="line">		子组件</span><br><span class="line">&lt;/xxxContext.Provider&gt;</span><br><span class="line"><span class="comment">// 后代组件</span></span><br><span class="line"><span class="comment">//第一种方式:仅适用于类组件 </span></span><br><span class="line"><span class="keyword">static</span> contextType = xxxContext  <span class="comment">// 声明接收context</span></span><br><span class="line"><span class="built_in">this</span>.context <span class="comment">// 读取context中的value数据</span></span><br><span class="line"><span class="comment">//第二种方式: 函数组件与类组件都可以</span></span><br><span class="line">&lt;xxxContext.Consumer&gt;</span><br><span class="line">    &#123;</span><br><span class="line">        value =&gt; ( <span class="comment">// value就是context中的value数据</span></span><br><span class="line">        要显示的内容</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/xxxContext.Consumer&gt;</span><br></pre></td></tr></table></figure><h4 id="组件优化"><a href="#组件优化" class="headerlink" title="组件优化"></a>组件优化</h4><ul><li>重写shouldComponentUpdate()方法</li><li>使用PureComponent</li></ul><h4 id="render-props"><a href="#render-props" class="headerlink" title="render props"></a>render props</h4><p>向组件内部动态传入带内容的结构(标签)</p><ul><li><p>使用children props: 通过组件标签体传入结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;A&gt;</span><br><span class="line">  &lt;B&gt;xxxx&lt;&#x2F;B&gt;</span><br><span class="line">&lt;&#x2F;A&gt;</span><br><span class="line">&#123;this.props.children&#125;</span><br><span class="line">问题: 如果B组件需要A组件内的数据, &#x3D;&#x3D;&gt; 做不到 </span><br></pre></td></tr></table></figure></li><li><p>render props</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;A render&#x3D;&#123;(data) &#x3D;&gt; &lt;C data&#x3D;&#123;data&#125;&gt;&lt;&#x2F;C&gt;&#125;&gt;&lt;&#x2F;A&gt;</span><br><span class="line">A组件: &#123;this.props.render(内部state数据)&#125;</span><br><span class="line">C组件: 读取A组件传入的数据显示 &#123;this.props.data&#125; </span><br></pre></td></tr></table></figure></li></ul><h4 id="错误边界"><a href="#错误边界" class="headerlink" title="错误边界"></a>错误边界</h4><p>用来捕获后代组件错误，渲染出备用页面</p><p>只能捕获后代组件生命周期产生的错误，不能捕获自己组件产生的错误</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 生命周期函数，一旦后台组件报错，就会触发</span></span><br><span class="line"><span class="keyword">static</span> <span class="function"><span class="title">getDerivedStateFromError</span>(<span class="params">error</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">    <span class="comment">// 在render之前触发</span></span><br><span class="line">    <span class="comment">// 返回新的state</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        hasError: <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">componentDidCatch</span>(<span class="params">error, info</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 统计页面的错误。发送请求发送到后台去</span></span><br><span class="line">    <span class="built_in">console</span>.log(error, info);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">马阳</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://maya1900.github.io/article/202112/review-react/">http://maya1900.github.io/article/202112/review-react/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/react/">react</a></div><div class="post_share"><div class="social-share" data-image="https://s4.ax1x.com/2021/12/31/T4tw1e.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechatpay.png" target="_blank"><img class="post-qr-code-img" src="/img/wechatpay.png" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/article/2022/ideaactive/"><img class="prev-cover" src="https://s4.ax1x.com/2021/12/29/TgxpGV.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">idea2021.3最新激活方法</div></div></a></div><div class="next-post pull-right"><a href="/article/202112/todolist-react/"><img class="next-cover" src="https://s4.ax1x.com/2021/12/29/TgxOSK.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">React-hook练手小项目--待办事件</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__name">马阳</div><div class="author-info__description">仰望星空的人，不应该被嘲笑。</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">57</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">43</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">14</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/maya1900"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=569760498&amp;website=www.oicqzone.com" target="_blank"><i class="fab fa-qq"></i></a><a class="social-icon" href="https://cdn.jsdelivr.net/gh/chen-xing/figure_bed_02/cdn/20210430003424827.jpg" target="_blank"><i class="fab fa-weixin"></i></a><a class="social-icon" href="https://maya1900.github.io/atom.xml" target="_blank" title="rss"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">前端学习分享，欢迎喜欢。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%87%8D%E5%AD%A6React"><span class="toc-number">1.</span> <span class="toc-text">重学React</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86"><span class="toc-number">1.1.</span> <span class="toc-text">基础部分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jsx%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.1.</span> <span class="toc-text">jsx基础语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">1.1.2.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">函数式组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Class%E7%BB%84%E4%BB%B6"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">Class组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%B8%89%E5%A4%A7%E5%B1%9E%E6%80%A7"><span class="toc-number">1.1.3.</span> <span class="toc-text">组件三大属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#state"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">state</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#props"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#refs"><span class="toc-number">1.1.3.3.</span> <span class="toc-text">refs</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.1.4.</span> <span class="toc-text">react事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%97%E6%8E%A7%E4%B8%8E%E9%9D%9E%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6"><span class="toc-number">1.1.5.</span> <span class="toc-text">受控与非受控组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.6.</span> <span class="toc-text">高阶函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="toc-number">1.1.7.</span> <span class="toc-text">函数的柯里化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.1.8.</span> <span class="toc-text">生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A7"><span class="toc-number">1.1.8.1.</span> <span class="toc-text">旧</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0"><span class="toc-number">1.1.8.2.</span> <span class="toc-text">新</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-%E8%B7%A8%E5%9F%9F"><span class="toc-number">1.1.9.</span> <span class="toc-text">react 跨域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1"><span class="toc-number">1.2.</span> <span class="toc-text">路由</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%EF%BC%9A"><span class="toc-number">1.2.1.</span> <span class="toc-text">基本使用：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E4%B8%8E%E4%B8%80%E8%88%AC%E7%BB%84%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.2.2.</span> <span class="toc-text">路由组件与一般组件：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NavLink%E5%B0%81%E8%A3%85%EF%BC%9A"><span class="toc-number">1.2.3.</span> <span class="toc-text">NavLink封装：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">1.2.4.</span> <span class="toc-text">嵌套路由：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%91%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-number">1.2.5.</span> <span class="toc-text">向路由组件传递参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="toc-number">1.2.6.</span> <span class="toc-text">编程式路由导航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#withRouter"><span class="toc-number">1.2.7.</span> <span class="toc-text">withRouter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#redux"><span class="toc-number">1.3.</span> <span class="toc-text">redux</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#redux%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.3.1.</span> <span class="toc-text">redux是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux%E4%B8%89%E4%B8%AA%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.2.</span> <span class="toc-text">redux三个概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#action"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reducer"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">reducer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#store"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">store</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux%E7%9A%84%E6%A0%B8%E5%BF%83api"><span class="toc-number">1.3.3.</span> <span class="toc-text">redux的核心api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redux%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">1.3.4.</span> <span class="toc-text">redux异步编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#react-redux"><span class="toc-number">1.3.5.</span> <span class="toc-text">react-redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%82%E5%92%8C%E6%A1%88%E4%BE%8B"><span class="toc-number">1.3.6.</span> <span class="toc-text">求和案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-mini%E7%89%88"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">redux mini版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-%E5%AE%8C%E6%95%B4%E7%89%88"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">redux 完整版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redux-%E5%BC%82%E6%AD%A5action"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">redux 异步action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-redux%E5%9F%BA%E7%A1%80%E7%89%88"><span class="toc-number">1.3.6.4.</span> <span class="toc-text">react-redux基础版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-redux%E4%BC%98%E5%8C%96"><span class="toc-number">1.3.6.5.</span> <span class="toc-text">react-redux优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-redux%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB%E7%89%88"><span class="toc-number">1.3.6.6.</span> <span class="toc-text">react-redux数据共享版</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#redact-redux%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7"><span class="toc-number">1.3.6.7.</span> <span class="toc-text">redact-redux开发者工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85"><span class="toc-number">1.4.</span> <span class="toc-text">打包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#react-%E6%8B%93%E5%B1%95"><span class="toc-number">1.5.</span> <span class="toc-text">react 拓展</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#setState%E7%9A%842%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">setState的2种写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lazyLoad"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">lazyLoad</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Hooks"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">Hooks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fragment"><span class="toc-number">1.5.0.4.</span> <span class="toc-text">Fragment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Context"><span class="toc-number">1.5.0.5.</span> <span class="toc-text">Context</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%98%E5%8C%96"><span class="toc-number">1.5.0.6.</span> <span class="toc-text">组件优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#render-props"><span class="toc-number">1.5.0.7.</span> <span class="toc-text">render props</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E8%BE%B9%E7%95%8C"><span class="toc-number">1.5.0.8.</span> <span class="toc-text">错误边界</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background:linear-gradient(90deg,rgba(247,149,51,.1) 0,rgba(243,112,85,.1) 15%,rgba(239,78,123,.1) 30%,rgba(161,102,171,.1) 44%,rgba(80,115,184,.1) 58%,rgba(16,152,173,.1) 72%,rgba(7,179,155,.1) 86%,rgba(109,186,130,.1) 100%)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By 马阳</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="algolia-search"><div class="search-dialog"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/algolia.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>function loadValine(){function e(){new Valine(Object.assign({el:"#vcomment",appId:"TXwgJ2kfJsLT4klNTK3dEH5A-gzGzoHsz",appKey:"tnQ0O7BXtN5FrX5rj1fsJhnL",placeholder:"ヾﾉ≧∀≦)o来啊，快活啊!",avatar:"monsterid",meta:"nick,mail,link".split(","),pageSize:"10",lang:"en",recordIP:!1,serverURLs:"",emojiCDN:"",emojiMaps:"",enableQQ:!1,path:window.location.pathname,requiredFields:["nick,mail"],visitor:!1},null))}"function"==typeof Valine?e():getScript("https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js").then(e)}function loadOtherComment(){loadValine()}setTimeout(loadValine,0)</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async mobile="false"></script></div></body></html>