---
title: ç”±å…¬å¼å­—ä½“å¼•å‘çš„...
date: 2022-05-01
tags:
  - å‰ç«¯
  - js
categories: js
cover: https://cdn.jsdelivr.net/gh/maya1900/pic@master/img/202205021237783.jpg
---

# å¼•è¨€

      å·¥ä½œæ—¶é‡åˆ°è¿™æ ·çš„å­—ç¬¦ä¸²`ð‘€ð‘œð‘›ð‘–ð‘¡ð‘œð‘Ÿð¿ð‘œð‘¡ð‘‡ð‘–ð‘šð‘’2ð·ð‘¢ð‘’`ï¼Œæµ‹è¯•è®©æŠŠè¿™æ ·çš„å­—ç¬¦ä¸²åšåˆ¤æ–­ï¼Œå¦‚æžœæ˜¯éœ€è¦åšæç¤ºï¼Œå¯æ˜¯è¿™çŽ©æ„æ— è®ºç²˜è´´åˆ°å“ªé‡Œéƒ½æ˜¯åŽŸæ ·è¾“å‡ºï¼Œå¾ˆè®©äººè´¹è§£ã€‚

      è¯¢é—®äº†ä¸€ä¸‹å‡ºå¤„ï¼Œæ˜¯åœ¨ppté‡Œç²˜è´´è¿‡æ¥çš„ï¼ŒäºŽæ˜¯ppté‡Œæ£é¼“äº†åŠå¤©ï¼Œå‘çŽ°ä¸æ˜¯å­—ä½“çš„é—®é¢˜ï¼Œåå€’å’Œppté‡Œæ’å…¥å…¬å¼çš„å­—ä½“æœ‰ç‚¹åƒï¼Œåˆå°è¯•æ’å…¥ä¸€æ ·çš„å­—ç¬¦ï¼Œå‘çŽ°æ ·å­ä¸€æ¯›ä¸€æ ·ï¼Œå› æ­¤æ–­å®šæ˜¯æµ‹è¯•ç»™çš„æ˜¯å…¬å¼å­—ä½“ã€‚

![](https://cdn.jsdelivr.net/gh/maya1900/pic@master/img/gif-2022-05-02.gif)

      åœ¨â€œä½Žè°ƒåŠ¡å®žä¼˜ç§€ä¸­å›½å¥½é’å¹´â€ç¾¤é‡Œé—®äº†ä¹‹åŽï¼Œ@windlingåŒå­¦ç»™å‡ºäº†ç­”æ¡ˆï¼š[è¿½æœ¬æº¯æºï¼šå­—ç¬¦ä¸²åŠç¼–ç  (qq.com)](https://mp.weixin.qq.com/s/7DupviMKtmUroKVA1ygCrw)ï¼Œæˆ‘æ‰åˆ¹é‚£æ˜Žç™½ï¼ŒåŽŸæ¥æ˜¯ç¼–ç é—®é¢˜ã€‚

# js çš„å­—ç¬¦ç¼–ç 

      åœ¨è®¡ç®—æœºä¸­ç”±äºŒè¿›åˆ¶æ¥ä¿å­˜æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®ç”±0å’Œ1ç»„æˆï¼Œæ¯ä¸ª0æˆ–è€…1å«1bitâ€”ä½ï¼Œ`1byte(å­—èŠ‚)=8bits`ï¼Œ`1KB = 1024 bytes`ï¼Œ`1MB(å…†) = 1024KB`ï¼Œ`1GB = 1024MB`ï¼Œ`1TB = 1024GB`ã€‚

      å›½é™…æ ‡å‡†ç»„ç»‡ä¸ºäº†ç»Ÿä¸€ä¸–ç•Œå„å›½çš„å­—ç¬¦ï¼ŒæŠŠå®ƒä»¬éƒ½æ”¾åœ¨äº†å¼ è¡¨é‡Œï¼Œä¸ºæ¯ä¸ªå­—ç¬¦éƒ½åˆ†é…ä¸€ä¸ªæ•°å­—ï¼Œè¿™å°±æ˜¯Unicodeç è¡¨ï¼Œè¿™æ ·ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½å¯¹åº”äº†å”¯ä¸€çš„æ•°å­—ï¼Œè¿™äº›æ•°å­—åˆå«åšç ç‚¹(Code Point)ã€‚

      åœ¨javascriptä¸­ä½¿ç”¨UCS-2ç¼–ç ï¼ˆåŽæ•´åˆè¿›äº†UTF-16ï¼Œæ•…å’ŒUTF-16ç¼–ç æ–¹å¼ç›¸åŒï¼‰ï¼Œå³16ä¸ªbitä½ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªç ç‚¹ï¼Œè¿™16ä¸ªbitä½å«åšä»£ç å•å…ƒ(ç å…ƒï¼Œcode unit)ã€‚é‚£ä¹ˆè¿™æ ·ä¸¤ä¸ªå­—èŠ‚èƒ½å¤Ÿè¡¨ç¤ºçš„æœ€å¤§æ•°æ˜¯65535(16è¿›åˆ¶0xFFFF)ï¼Œå¦‚æžœè¶…è¿‡çš„è¯ï¼Œåˆ™ä½¿ç”¨ä¸¤ä¸ªç å…ƒè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚

# js çš„å­—ç¬¦ä¸²æ“ä½œ

## å­—ç¬¦è½¬ç ç‚¹/ç å…ƒ

      åœ¨jsä¸­åº”è¯¥å¦‚ä½•èŽ·å¾—è¿™äº›æ•°å­—å‘¢ï¼Ÿ

```JavaScript
// str.charCodeAt(pos) èŽ·å¾—ç å…ƒ
// str.codePointAt(pos) èŽ·å¾—ç ç‚¹ posè¡¨ç¤ºsträ¸­å­—ç¬¦çš„ä½ç½® ä¸å†™é»˜è®¤ç¬¬0ä½
'abc'.charCodeAt(1) // 98
'123'.charCodeAt() // 49
'abc'.codePointAt(1) // 98
'123'.codePointAt() // 49
'ð ®·'.charCodeAt() // 55362
'ð ®·'.codePointAt() // 134071

```

      å¯ä»¥çœ‹åˆ°ï¼Œåœ¨65535ä»¥å†…ç å…ƒå’Œç ç‚¹çš„å€¼æ˜¯ä¸€æ ·çš„ã€‚é‡åˆ°è¶…è¿‡65535å¤–çš„å­—ç¬¦charCodeAtå°±ä¸èƒ½æ­£ç¡®è½¬æ¢äº†ï¼Œå®ƒå®žé™…ä¸Šç”¨äº†ä¸¤ä¸ªç å…ƒæ¥è¡¨ç¤ºï¼Œè€ŒcharCodeAtåªè¿”å›žäº†ä¸€ä¸ªç å…ƒï¼ŒcodePointAtåˆ™èƒ½æ­£ç¡®è¡¨ç¤ºã€‚è€Œäº‹å®žä¸ŠcodePointAtæ˜¯ES6ä¸ºäº†å¯¹Unicodeå­—ç¬¦çš„æ”¯æŒå¢žåŠ çš„ï¼Œå…¼å®¹äº†charCodeAtï¼ŒåŽæ–‡æåˆ°çš„fromCodePointä¹Ÿæ˜¯ä¸€æ ·ã€‚

## ç å…ƒ/ç ç‚¹è½¬å­—ç¬¦

      é‚£ä¹ˆå¯¹åº”çš„ï¼Œä¹Ÿåº”è¯¥æœ‰ç å…ƒç ç‚¹è½¬å­—ç¬¦çš„æ–¹æ³•ï¼š

```JavaScript
// String.fromCharCode(num1,num2,...) ç å…ƒèŽ·å¾—å­—ç¬¦
// String.fromCodePoint(num1, num2,...) ç ç‚¹èŽ·å¾—å­—ç¬¦
String.fromCharCode(48, 49, 50) // 012
String.fromCodePoint(97, 98, 99) // abc

```

# åˆ¤æ–­

      å¥½äº†ï¼Œæœ‰äº†ä»¥ä¸ŠçŸ¥è¯†ï¼Œé‚£ä¹ˆåˆ¤æ–­è¿™æ ·çš„å­—ç¬¦ä¹Ÿå¾ˆç®€å•ï¼š

```JavaScript
const str = 'ð‘€ð‘œð‘›ð‘–ð‘¡ð‘œð‘Ÿð¿ð‘œð‘¡ð‘‡ð‘–ð‘šð‘’2ð·ð‘¢ð‘’';
for (let s of str) {
  if (s.codePointAt() > 0xffff) {
    console.log(`${s} is a special character`);
  } else {
    console.log(`${s} is a normal character`);
  }
}
```

# å…¬å¼å­—ç¬¦çš„äº’è½¬

      è¿™æ ·å·¥ä½œä¼¼ä¹Žå®Œæˆäº†ï¼Ÿå¥½å¥‡çš„æˆ‘åˆæƒ³äº†ï¼Œå¦‚æžœæƒ³è½¬æ¢ä¸ºæ™®é€šå­—ç¬¦å‘¢ï¼Ÿ

      é¦–å…ˆæˆ‘éœ€è¦çŸ¥é“å®ƒä»¬çš„ç ç‚¹å€¼ï¼Œä»¥ ð‘€ ä¸ºä¾‹ï¼Œ`'ð‘€'.codePointAt(0) `æ‹¿åˆ°äº†å®ƒçš„ç ç‚¹æ˜¯119872ï¼Œé‚£ä¹ˆä¸€ä¸ªæ™®é€šå­—æ¯Mçš„ç ç‚¹å€¼æ˜¯77ï¼Œç›¸å‡å¾—åˆ°ä¸€ä¸ªå·®å€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å¤§å†™å­—æ¯ä¸å°±éƒ½å¯ä»¥äº’ç›¸è½¬æ¢äº†å—ï¼Ÿç›¸åº”çš„å°å†™å­—æ¯ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

```JavaScript
// è½¬æ™®é€šå­—ç¬¦
const str = 'ð‘€ð‘œð‘›ð‘–ð‘¡ð‘œð‘Ÿð¿ð‘œð‘¡ð‘‡ð‘–ð‘šð‘’2ð·ð‘¢ð‘’';
function toNormalStr(str) {
  const result = [];
  for (const s of str) {
    const t = s.codePointAt();
    if (t >= 0x1d434 && t <= 0x1d44d) {
      result.push(String.fromCharCode(t - 119795));
    } else if (t >= 0x1d44e && t <= 0x1d467) {
      result.push(String.fromCharCode(t - 119789));
    } else {
      result.push(s);
    }
  }
  return result.join('');
}
console.log(toNormalStr(str)); // MonitorLotTime2Due
```

```JavaScript
// è½¬å…¬å¼å­—ç¬¦
const str = 'MonitorLotTime2Due';
function toSpecialStr(str) {
  const result = [];
  for (const s of str) {
    const t = s.charCodeAt();
    if (t >= 65 && t <= 90) {
      result.push(String.fromCodePoint(119795 + t));
    } else if (t >= 97 && t <= 122) {
      result.push(String.fromCodePoint(119789 + t));
    } else {
      result.push(s);
    }
  }
  return result.join('');
}
console.log(toSpecialStr(str)); // ð‘€ð‘œð‘›ð‘–ð‘¡ð‘œð‘Ÿð¿ð‘œð‘¡ð‘‡ð‘–ð‘šð‘’2ð·ð‘¢ð‘’
```

      è‡³äºŽå…¶ä»–çš„ä¸€äº›æ•°å­¦ç¬¦å·å°±ä¸æžäº†ï¼Œä¹Ÿéƒ½æ˜¯æ‰¾å·®å€¼è®¡ç®—ã€‚ã€‚

      å¦å¤–åŽ»æ‰¾[Unicode 14.0 å­—ç¬¦ä»£ç è¡¨](https://www.unicode.org/charts/)é‡Œçš„[Mathematical Alphanumeric Symbols](https://www.unicode.org/charts/PDF/U1D400.pdf) æ•°å­¦å­—æ¯æ•°å­—ç¬¦å·ï¼Œå¯ä»¥æ‰¾åˆ°æ›´å¤šï¼Œåœ¨jsé‡Œä½¿ç”¨`'ð‘€'.codePointAt(0).toString(16)`å¾—åˆ°16è¿›åˆ¶çš„å€¼ï¼Œå†åŽ»å¯¹åº”æ‰¾å­—ç¬¦ã€‚

## å…¶ä»–çš„ä¸€äº›ï¼Ÿ

      çŸ¥é“äº†16è¿›åˆ¶è½¬å­—ç¬¦ï¼Ÿ å¦‚ï¼š`"\u{1D4A5}\u{1D4A6}\u{1D4A7}\u{1D4A8}".toString()` å¾—åˆ° `'ð’¥ð’¦ð’§ð’¨'`

      çŸ¥é“äº†16è¿›åˆ¶è½¬ç ç‚¹ï¼Ÿ å¦‚ï¼š`'\u{1D44e}'.codePointAt()`èŽ·å¾—`119886`

      çŸ¥é“äº†ç ç‚¹è½¬16è¿›åˆ¶ï¼Ÿ å¦‚ï¼š`Number(119863).toString(16)` èŽ·å¾— `'1d437'`



      åˆæƒ³åˆ°ï¼šjsä¸­ä½¿ç”¨UTF-16çš„ç¼–ç æ–¹å¼ï¼Œé‚£ä¹ˆä¸€ä¸ªå­—æ¯å 2ä¸ªå­—èŠ‚ï¼Ÿæ˜¯çš„ã€‚è¿™å’Œæˆ‘ä»¬è®¤çŸ¥çš„ä¸€ä¸ªè‹±æ–‡å­—æ¯æ•°å­—å 1ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªä¸­æ–‡å­—ç¬¦å 2ä¸ªå­—èŠ‚ä¸å¤ªä¸€æ ·ã€‚

# å‚è€ƒ

[è¿½æœ¬æº¯æºï¼šå­—ç¬¦ä¸²åŠç¼–ç  (qq.com)](https://mp.weixin.qq.com/s/7DupviMKtmUroKVA1ygCrw)

[ES6 å­—ç¬¦ä¸²æ“ä½œè®²è§£](https://www.cnblogs.com/laraLee/p/9156807.html)

[Unicode ä¸Ž JavaScript è¯¦è§£ - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— (ruanyifeng.com)](http://www.ruanyifeng.com/blog/2014/12/unicode.html)

[String - JavaScript | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String)

      æ²¡äº†ï¼Ÿè¿™å°±æ²¡äº†ï¼Ÿemm...
